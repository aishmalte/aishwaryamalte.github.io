<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aishwarya & Malte — Wedding</title>
  <meta name="description" content="Wedding website for Aishwarya & Malte — itinerary, functions, gallery, RSVP, travel & more details." />
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./style.css?v=5">
</head>
<body>
  <!-- ====================== NAV ======================= -->
  <nav class="nav">
    <div class="wrap nav-inner">
      <div class="brand">
        <img class="logo-img" src="./images/logo.png" alt="Aishwarya & Malte logo">
        <span>Aishwarya&nbsp;&amp;&nbsp;Malte</span>
      </div>

      <button class="menu-toggle" aria-label="Toggle menu" onclick="toggleMenu()">☰</button>

      <!-- Desktop Menu -->
      <div id="menu" class="menu" role="navigation" aria-label="Main">
        <a href="#itinerary">Itinerary</a>
        <a href="#rsvp">RSVP</a>
        <a href="#functions">Details of Functions</a>
        <a href="#travel">Travel Details</a>
        <a href="#gallery">Photo Gallery</a>
        <a href="#more">More Details</a>
        <!-- Desktop language toggle -->
        <button id="lang-toggle" class="lang-btn" aria-label="Toggle language">DE</button>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div id="menuMobile" class="menu mobile wrap" hidden>
      <a href="#itinerary" onclick="toggleMenu(true)">Itinerary</a>
      <a href="#rsvp" onclick="toggleMenu(true)">RSVP</a>
      <a href="#functions" onclick="toggleMenu(true)">Details of Functions</a>
      <a href="#travel" onclick="toggleMenu(true)">Travel Details</a>
      <a href="#gallery" onclick="toggleMenu(true)">Photo Gallery</a>
      <a href="#more" onclick="toggleMenu(true)">More Details</a>
      <!-- Mobile language toggle -->
      <button id="lang-toggle-mobile" class="lang-btn" aria-label="Toggle language">DE</button>
    </div>
  </nav>

  <!-- ====================== HERO (banner only) ======================= -->
  <header class="hero" id="home"></header>

  <!-- ====================== INTRO SECTION (Home only) ======================= -->
  <section class="intro-section" id="intro">
    <div class="wrap text-center">
      <div class="chip">You're invited!</div>
      <h1 class="names">Aishwarya &amp; Malte</h1>
      <p class="date">Wedding Celebrations — <span contenteditable="true">24 – 26 February 2026</span></p>
      <div class="cta">
        <a class="btn primary" href="#rsvp">RSVP</a>
        <a class="btn ghost" href="#itinerary">View Itinerary</a>
      </div>
    </div>
  </section>

  <!-- ====================== DYNAMIC CONTENT ======================= -->
  <main id="content"></main>

  <footer>
    <div class="wrap" style="display:flex; justify-content:space-between; gap:1rem; align-items:center; flex-wrap:wrap">
      <div>© <span id="y"></span> Malte &amp; Aishwarya</div>
      <div class="note">With love from Girdhar &amp; Scherbarth family ✨</div>
    </div>
  </footer>

  <script>
    // --- Mobile menu toggle ---
    function toggleMenu(close){
      const m = document.getElementById('menuMobile');
      const isHidden = m.hasAttribute('hidden');
      if(close){ m.setAttribute('hidden',''); return; }
      if(isHidden){ m.removeAttribute('hidden'); } else { m.setAttribute('hidden',''); }
    }

    // Track current language
    let currentLang = 'en';

    // Programmatically trigger Google Translate selection
    function translatePage(lang) {
      const select = document.querySelector('.goog-te-combo');
      if (select) {
        select.value = lang;
        // fire change event so Google Translate runs
        select.dispatchEvent(new Event('change'));
      } else {
        // if the widget isn't ready yet, retry shortly
        setTimeout(() => translatePage(lang), 400);
      }
    }

    // --- Dynamic section loader ---
    async function loadSection(section) {
      try {
        const res = await fetch(`./sections/${section}.html`, {cache: 'no-cache'});
        if (!res.ok) throw new Error('Not found');
        const html = await res.text();
        document.getElementById("content").innerHTML = html;

        // --- Change hero overlay behavior ---
        const hero = document.querySelector(".hero");
        const intro = document.getElementById("intro");

        if (section === "home" || section === "") {
          hero.classList.remove("with-card");
          intro.style.display = "block";
        } else {
          hero.classList.add("with-card");
          intro.style.display = "none";
        }

        // Re-translate newly injected content if DE is active
        if (currentLang !== 'en') {
          translatePage(currentLang);
        }

        window.scrollTo({ top: document.querySelector('nav').offsetHeight, behavior: "smooth" });
      } catch (e) {
        document.getElementById("content").innerHTML =
          `<section class="wrap"><p class="note">Check out all the tabs and let us know if you have questions! </p></section>`;
      }
    }

    // --- Handle desktop nav clicks ---
    document.querySelectorAll("#menu a").forEach(a => {
      a.addEventListener("click", e => {
        e.preventDefault();
        const id = a.getAttribute("href").replace("#", "");
        loadSection(id);
      });
    });

    // --- Handle dynamic read-more links ---
    document.addEventListener("click", function(e) {
      const link = e.target.closest("a.read-more");
      if (link) {
        e.preventDefault();
        const id = link.getAttribute("href").replace("#", "");
        loadSection(id);
      }
    });

    // --- Language toggle buttons (desktop + mobile) ---
    function updateLangButtons() {
      const label = currentLang === 'en' ? 'DE' : 'EN';
      const btn1 = document.getElementById('lang-toggle');
      const btn2 = document.getElementById('lang-toggle-mobile');
      if (btn1) btn1.textContent = label;
      if (btn2) btn2.textContent = label;
    }

    function onLangToggleClick() {
      currentLang = currentLang === 'en' ? 'de' : 'en';
      updateLangButtons();
      translatePage(currentLang);
    }

    document.addEventListener('DOMContentLoaded', () => {
      const btn1 = document.getElementById('lang-toggle');
      const btn2 = document.getElementById('lang-toggle-mobile');
      if (btn1) btn1.addEventListener('click', onLangToggleClick);
      if (btn2) btn2.addEventListener('click', onLangToggleClick);
    });

    // --- Year ---
    document.getElementById('y').textContent = new Date().getFullYear();

    // --- Default load (Home page behavior) ---
    loadSection("");
  </script>

  <!-- Visible Google Translate widget -->
  <div id="google_translate_element" style="margin-right:1rem;"></div>

  <!-- Google Translate loader -->
  <script>
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    includedLanguages: 'en,de',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
  }, 'google_translate_element');
}
  </script>
  <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</body>
</html>
